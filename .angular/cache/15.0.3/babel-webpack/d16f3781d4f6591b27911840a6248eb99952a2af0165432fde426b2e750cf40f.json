{"ast":null,"code":"import _classCallCheck from \"C:/Users/User/Projects/meanstack/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/User/Projects/meanstack/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"C:/Users/User/Projects/meanstack/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/Users/User/Projects/meanstack/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"C:/Users/User/Projects/meanstack/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/User/Projects/meanstack/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Action } from './Action';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nexport var AsyncAction = /*#__PURE__*/function (_Action) {\n  _inherits(AsyncAction, _Action);\n  var _super = _createSuper(AsyncAction);\n  function AsyncAction(scheduler, work) {\n    var _this;\n    _classCallCheck(this, AsyncAction);\n    _this = _super.call(this, scheduler, work);\n    _this.scheduler = scheduler;\n    _this.work = work;\n    _this.pending = false;\n    return _this;\n  }\n  _createClass(AsyncAction, [{\n    key: \"schedule\",\n    value: function schedule(state) {\n      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var _a;\n      if (this.closed) {\n        return this;\n      }\n      this.state = state;\n      var id = this.id;\n      var scheduler = this.scheduler;\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, delay);\n      }\n      this.pending = true;\n      this.delay = delay;\n      this.id = (_a = this.id) !== null && _a !== void 0 ? _a : this.requestAsyncId(scheduler, this.id, delay);\n      return this;\n    }\n  }, {\n    key: \"requestAsyncId\",\n    value: function requestAsyncId(scheduler, _id) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n  }, {\n    key: \"recycleAsyncId\",\n    value: function recycleAsyncId(_scheduler, id) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      if (delay != null && this.delay === delay && this.pending === false) {\n        return id;\n      }\n      if (id != null) {\n        intervalProvider.clearInterval(id);\n      }\n      return undefined;\n    }\n  }, {\n    key: \"execute\",\n    value: function execute(state, delay) {\n      if (this.closed) {\n        return new Error('executing a cancelled action');\n      }\n      this.pending = false;\n      var error = this._execute(state, delay);\n      if (error) {\n        return error;\n      } else if (this.pending === false && this.id != null) {\n        this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n      }\n    }\n  }, {\n    key: \"_execute\",\n    value: function _execute(state, _delay) {\n      var errored = false;\n      var errorValue;\n      try {\n        this.work(state);\n      } catch (e) {\n        errored = true;\n        errorValue = e ? e : new Error('Scheduled action threw falsy error');\n      }\n      if (errored) {\n        this.unsubscribe();\n        return errorValue;\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      if (!this.closed) {\n        var id = this.id,\n          scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        this.work = this.state = this.scheduler = null;\n        this.pending = false;\n        arrRemove(actions, this);\n        if (id != null) {\n          this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n        _get(_getPrototypeOf(AsyncAction.prototype), \"unsubscribe\", this).call(this);\n      }\n    }\n  }]);\n  return AsyncAction;\n}(Action);","map":{"version":3,"names":["Action","intervalProvider","arrRemove","AsyncAction","scheduler","work","pending","state","delay","_a","closed","id","recycleAsyncId","requestAsyncId","_id","setInterval","flush","bind","_scheduler","clearInterval","undefined","Error","error","_execute","_delay","errored","errorValue","e","unsubscribe","actions"],"sources":["C:/Users/User/Projects/meanstack/node_modules/rxjs/dist/esm/internal/scheduler/AsyncAction.js"],"sourcesContent":["import { Action } from './Action';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nexport class AsyncAction extends Action {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n        this.pending = false;\n    }\n    schedule(state, delay = 0) {\n        var _a;\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        const id = this.id;\n        const scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = (_a = this.id) !== null && _a !== void 0 ? _a : this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    }\n    requestAsyncId(scheduler, _id, delay = 0) {\n        return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n    recycleAsyncId(_scheduler, id, delay = 0) {\n        if (delay != null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        if (id != null) {\n            intervalProvider.clearInterval(id);\n        }\n        return undefined;\n    }\n    execute(state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        const error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    }\n    _execute(state, _delay) {\n        let errored = false;\n        let errorValue;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = e ? e : new Error('Scheduled action threw falsy error');\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    }\n    unsubscribe() {\n        if (!this.closed) {\n            const { id, scheduler } = this;\n            const { actions } = scheduler;\n            this.work = this.state = this.scheduler = null;\n            this.pending = false;\n            arrRemove(actions, this);\n            if (id != null) {\n                this.id = this.recycleAsyncId(scheduler, id, null);\n            }\n            this.delay = null;\n            super.unsubscribe();\n        }\n    }\n}\n"],"mappings":";;;;;;AAAA,SAASA,MAAM,QAAQ,UAAU;AACjC,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,SAAS,QAAQ,mBAAmB;AAC7C,WAAaC,WAAW;EAAA;EAAA;EACpB,qBAAYC,SAAS,EAAEC,IAAI,EAAE;IAAA;IAAA;IACzB,0BAAMD,SAAS,EAAEC,IAAI;IACrB,MAAKD,SAAS,GAAGA,SAAS;IAC1B,MAAKC,IAAI,GAAGA,IAAI;IAChB,MAAKC,OAAO,GAAG,KAAK;IAAC;EACzB;EAAC;IAAA;IAAA,OACD,kBAASC,KAAK,EAAa;MAAA,IAAXC,KAAK,uEAAG,CAAC;MACrB,IAAIC,EAAE;MACN,IAAI,IAAI,CAACC,MAAM,EAAE;QACb,OAAO,IAAI;MACf;MACA,IAAI,CAACH,KAAK,GAAGA,KAAK;MAClB,IAAMI,EAAE,GAAG,IAAI,CAACA,EAAE;MAClB,IAAMP,SAAS,GAAG,IAAI,CAACA,SAAS;MAChC,IAAIO,EAAE,IAAI,IAAI,EAAE;QACZ,IAAI,CAACA,EAAE,GAAG,IAAI,CAACC,cAAc,CAACR,SAAS,EAAEO,EAAE,EAAEH,KAAK,CAAC;MACvD;MACA,IAAI,CAACF,OAAO,GAAG,IAAI;MACnB,IAAI,CAACE,KAAK,GAAGA,KAAK;MAClB,IAAI,CAACG,EAAE,GAAG,CAACF,EAAE,GAAG,IAAI,CAACE,EAAE,MAAM,IAAI,IAAIF,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,IAAI,CAACI,cAAc,CAACT,SAAS,EAAE,IAAI,CAACO,EAAE,EAAEH,KAAK,CAAC;MACxG,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,wBAAeJ,SAAS,EAAEU,GAAG,EAAa;MAAA,IAAXN,KAAK,uEAAG,CAAC;MACpC,OAAOP,gBAAgB,CAACc,WAAW,CAACX,SAAS,CAACY,KAAK,CAACC,IAAI,CAACb,SAAS,EAAE,IAAI,CAAC,EAAEI,KAAK,CAAC;IACrF;EAAC;IAAA;IAAA,OACD,wBAAeU,UAAU,EAAEP,EAAE,EAAa;MAAA,IAAXH,KAAK,uEAAG,CAAC;MACpC,IAAIA,KAAK,IAAI,IAAI,IAAI,IAAI,CAACA,KAAK,KAAKA,KAAK,IAAI,IAAI,CAACF,OAAO,KAAK,KAAK,EAAE;QACjE,OAAOK,EAAE;MACb;MACA,IAAIA,EAAE,IAAI,IAAI,EAAE;QACZV,gBAAgB,CAACkB,aAAa,CAACR,EAAE,CAAC;MACtC;MACA,OAAOS,SAAS;IACpB;EAAC;IAAA;IAAA,OACD,iBAAQb,KAAK,EAAEC,KAAK,EAAE;MAClB,IAAI,IAAI,CAACE,MAAM,EAAE;QACb,OAAO,IAAIW,KAAK,CAAC,8BAA8B,CAAC;MACpD;MACA,IAAI,CAACf,OAAO,GAAG,KAAK;MACpB,IAAMgB,KAAK,GAAG,IAAI,CAACC,QAAQ,CAAChB,KAAK,EAAEC,KAAK,CAAC;MACzC,IAAIc,KAAK,EAAE;QACP,OAAOA,KAAK;MAChB,CAAC,MACI,IAAI,IAAI,CAAChB,OAAO,KAAK,KAAK,IAAI,IAAI,CAACK,EAAE,IAAI,IAAI,EAAE;QAChD,IAAI,CAACA,EAAE,GAAG,IAAI,CAACC,cAAc,CAAC,IAAI,CAACR,SAAS,EAAE,IAAI,CAACO,EAAE,EAAE,IAAI,CAAC;MAChE;IACJ;EAAC;IAAA;IAAA,OACD,kBAASJ,KAAK,EAAEiB,MAAM,EAAE;MACpB,IAAIC,OAAO,GAAG,KAAK;MACnB,IAAIC,UAAU;MACd,IAAI;QACA,IAAI,CAACrB,IAAI,CAACE,KAAK,CAAC;MACpB,CAAC,CACD,OAAOoB,CAAC,EAAE;QACNF,OAAO,GAAG,IAAI;QACdC,UAAU,GAAGC,CAAC,GAAGA,CAAC,GAAG,IAAIN,KAAK,CAAC,oCAAoC,CAAC;MACxE;MACA,IAAII,OAAO,EAAE;QACT,IAAI,CAACG,WAAW,EAAE;QAClB,OAAOF,UAAU;MACrB;IACJ;EAAC;IAAA;IAAA,OACD,uBAAc;MACV,IAAI,CAAC,IAAI,CAAChB,MAAM,EAAE;QACd,IAAQC,EAAE,GAAgB,IAAI,CAAtBA,EAAE;UAAEP,SAAS,GAAK,IAAI,CAAlBA,SAAS;QACrB,IAAQyB,OAAO,GAAKzB,SAAS,CAArByB,OAAO;QACf,IAAI,CAACxB,IAAI,GAAG,IAAI,CAACE,KAAK,GAAG,IAAI,CAACH,SAAS,GAAG,IAAI;QAC9C,IAAI,CAACE,OAAO,GAAG,KAAK;QACpBJ,SAAS,CAAC2B,OAAO,EAAE,IAAI,CAAC;QACxB,IAAIlB,EAAE,IAAI,IAAI,EAAE;UACZ,IAAI,CAACA,EAAE,GAAG,IAAI,CAACC,cAAc,CAACR,SAAS,EAAEO,EAAE,EAAE,IAAI,CAAC;QACtD;QACA,IAAI,CAACH,KAAK,GAAG,IAAI;QACjB;MACJ;IACJ;EAAC;EAAA;AAAA,EA5E4BR,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}