{"ast":null,"code":"import { asyncScheduler } from '../scheduler/async';\nimport { isValidDate } from '../util/isDate';\nimport { operate } from '../util/lift';\nimport { innerFrom } from '../observable/innerFrom';\nimport { createErrorClass } from '../util/createErrorClass';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport var TimeoutError = createErrorClass(function (_super) {\n  return function TimeoutErrorImpl() {\n    var info = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    _super(this);\n    this.message = 'Timeout has occurred';\n    this.name = 'TimeoutError';\n    this.info = info;\n  };\n});\nexport function timeout(config, schedulerArg) {\n  var _ref = isValidDate(config) ? {\n      first: config\n    } : typeof config === 'number' ? {\n      each: config\n    } : config,\n    first = _ref.first,\n    each = _ref.each,\n    _ref$with = _ref[\"with\"],\n    _with = _ref$with === void 0 ? timeoutErrorFactory : _ref$with,\n    _ref$scheduler = _ref.scheduler,\n    scheduler = _ref$scheduler === void 0 ? schedulerArg !== null && schedulerArg !== void 0 ? schedulerArg : asyncScheduler : _ref$scheduler,\n    _ref$meta = _ref.meta,\n    meta = _ref$meta === void 0 ? null : _ref$meta;\n  if (first == null && each == null) {\n    throw new TypeError('No timeout provided.');\n  }\n  return operate(function (source, subscriber) {\n    var originalSourceSubscription;\n    var timerSubscription;\n    var lastValue = null;\n    var seen = 0;\n    var startTimer = function startTimer(delay) {\n      timerSubscription = executeSchedule(subscriber, scheduler, function () {\n        try {\n          originalSourceSubscription.unsubscribe();\n          innerFrom(_with({\n            meta: meta,\n            lastValue: lastValue,\n            seen: seen\n          })).subscribe(subscriber);\n        } catch (err) {\n          subscriber.error(err);\n        }\n      }, delay);\n    };\n    originalSourceSubscription = source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n      seen++;\n      subscriber.next(lastValue = value);\n      each > 0 && startTimer(each);\n    }, undefined, undefined, function () {\n      if (!(timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.closed)) {\n        timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n      }\n      lastValue = null;\n    }));\n    !seen && startTimer(first != null ? typeof first === 'number' ? first : +first - scheduler.now() : each);\n  });\n}\nfunction timeoutErrorFactory(info) {\n  throw new TimeoutError(info);\n}","map":{"version":3,"names":["asyncScheduler","isValidDate","operate","innerFrom","createErrorClass","createOperatorSubscriber","executeSchedule","TimeoutError","_super","TimeoutErrorImpl","info","message","name","timeout","config","schedulerArg","first","each","_with","timeoutErrorFactory","scheduler","meta","TypeError","source","subscriber","originalSourceSubscription","timerSubscription","lastValue","seen","startTimer","delay","unsubscribe","subscribe","err","error","value","next","undefined","closed","now"],"sources":["C:/Users/User/Projects/meanstack/node_modules/rxjs/dist/esm/internal/operators/timeout.js"],"sourcesContent":["import { asyncScheduler } from '../scheduler/async';\nimport { isValidDate } from '../util/isDate';\nimport { operate } from '../util/lift';\nimport { innerFrom } from '../observable/innerFrom';\nimport { createErrorClass } from '../util/createErrorClass';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport const TimeoutError = createErrorClass((_super) => function TimeoutErrorImpl(info = null) {\n    _super(this);\n    this.message = 'Timeout has occurred';\n    this.name = 'TimeoutError';\n    this.info = info;\n});\nexport function timeout(config, schedulerArg) {\n    const { first, each, with: _with = timeoutErrorFactory, scheduler = schedulerArg !== null && schedulerArg !== void 0 ? schedulerArg : asyncScheduler, meta = null, } = (isValidDate(config) ? { first: config } : typeof config === 'number' ? { each: config } : config);\n    if (first == null && each == null) {\n        throw new TypeError('No timeout provided.');\n    }\n    return operate((source, subscriber) => {\n        let originalSourceSubscription;\n        let timerSubscription;\n        let lastValue = null;\n        let seen = 0;\n        const startTimer = (delay) => {\n            timerSubscription = executeSchedule(subscriber, scheduler, () => {\n                try {\n                    originalSourceSubscription.unsubscribe();\n                    innerFrom(_with({\n                        meta,\n                        lastValue,\n                        seen,\n                    })).subscribe(subscriber);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }, delay);\n        };\n        originalSourceSubscription = source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            seen++;\n            subscriber.next((lastValue = value));\n            each > 0 && startTimer(each);\n        }, undefined, undefined, () => {\n            if (!(timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.closed)) {\n                timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            }\n            lastValue = null;\n        }));\n        !seen && startTimer(first != null ? (typeof first === 'number' ? first : +first - scheduler.now()) : each);\n    });\n}\nfunction timeoutErrorFactory(info) {\n    throw new TimeoutError(info);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}