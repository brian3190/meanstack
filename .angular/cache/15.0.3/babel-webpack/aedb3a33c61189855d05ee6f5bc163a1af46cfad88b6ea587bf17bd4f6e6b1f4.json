{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/User/Projects/meanstack/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { arrRemove } from '../util/arrRemove';\nexport function bufferCount(bufferSize) {\n  var startBufferEvery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  startBufferEvery = startBufferEvery !== null && startBufferEvery !== void 0 ? startBufferEvery : bufferSize;\n  return operate(function (source, subscriber) {\n    var buffers = [];\n    var count = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      var toEmit = null;\n      if (count++ % startBufferEvery === 0) {\n        buffers.push([]);\n      }\n      var _iterator = _createForOfIteratorHelper(buffers),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _buffer = _step.value;\n          _buffer.push(value);\n          if (bufferSize <= _buffer.length) {\n            toEmit = toEmit !== null && toEmit !== void 0 ? toEmit : [];\n            toEmit.push(_buffer);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      if (toEmit) {\n        var _iterator2 = _createForOfIteratorHelper(toEmit),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var buffer = _step2.value;\n            arrRemove(buffers, buffer);\n            subscriber.next(buffer);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n    }, function () {\n      var _iterator3 = _createForOfIteratorHelper(buffers),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var buffer = _step3.value;\n          subscriber.next(buffer);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      subscriber.complete();\n    }, undefined, function () {\n      buffers = null;\n    }));\n  });\n}","map":{"version":3,"names":["operate","createOperatorSubscriber","arrRemove","bufferCount","bufferSize","startBufferEvery","source","subscriber","buffers","count","subscribe","value","toEmit","push","buffer","length","next","complete","undefined"],"sources":["C:/Users/User/Projects/meanstack/node_modules/rxjs/dist/esm/internal/operators/bufferCount.js"],"sourcesContent":["import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { arrRemove } from '../util/arrRemove';\nexport function bufferCount(bufferSize, startBufferEvery = null) {\n    startBufferEvery = startBufferEvery !== null && startBufferEvery !== void 0 ? startBufferEvery : bufferSize;\n    return operate((source, subscriber) => {\n        let buffers = [];\n        let count = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            let toEmit = null;\n            if (count++ % startBufferEvery === 0) {\n                buffers.push([]);\n            }\n            for (const buffer of buffers) {\n                buffer.push(value);\n                if (bufferSize <= buffer.length) {\n                    toEmit = toEmit !== null && toEmit !== void 0 ? toEmit : [];\n                    toEmit.push(buffer);\n                }\n            }\n            if (toEmit) {\n                for (const buffer of toEmit) {\n                    arrRemove(buffers, buffer);\n                    subscriber.next(buffer);\n                }\n            }\n        }, () => {\n            for (const buffer of buffers) {\n                subscriber.next(buffer);\n            }\n            subscriber.complete();\n        }, undefined, () => {\n            buffers = null;\n        }));\n    });\n}\n"],"mappings":";AAAA,SAASA,OAAO,QAAQ,cAAc;AACtC,SAASC,wBAAwB,QAAQ,sBAAsB;AAC/D,SAASC,SAAS,QAAQ,mBAAmB;AAC7C,OAAO,SAASC,WAAW,CAACC,UAAU,EAA2B;EAAA,IAAzBC,gBAAgB,uEAAG,IAAI;EAC3DA,gBAAgB,GAAGA,gBAAgB,KAAK,IAAI,IAAIA,gBAAgB,KAAK,KAAK,CAAC,GAAGA,gBAAgB,GAAGD,UAAU;EAC3G,OAAOJ,OAAO,CAAC,UAACM,MAAM,EAAEC,UAAU,EAAK;IACnC,IAAIC,OAAO,GAAG,EAAE;IAChB,IAAIC,KAAK,GAAG,CAAC;IACbH,MAAM,CAACI,SAAS,CAACT,wBAAwB,CAACM,UAAU,EAAE,UAACI,KAAK,EAAK;MAC7D,IAAIC,MAAM,GAAG,IAAI;MACjB,IAAIH,KAAK,EAAE,GAAGJ,gBAAgB,KAAK,CAAC,EAAE;QAClCG,OAAO,CAACK,IAAI,CAAC,EAAE,CAAC;MACpB;MAAC,2CACoBL,OAAO;QAAA;MAAA;QAA5B,oDAA8B;UAAA,IAAnBM,OAAM;UACbA,OAAM,CAACD,IAAI,CAACF,KAAK,CAAC;UAClB,IAAIP,UAAU,IAAIU,OAAM,CAACC,MAAM,EAAE;YAC7BH,MAAM,GAAGA,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAGA,MAAM,GAAG,EAAE;YAC3DA,MAAM,CAACC,IAAI,CAACC,OAAM,CAAC;UACvB;QACJ;MAAC;QAAA;MAAA;QAAA;MAAA;MACD,IAAIF,MAAM,EAAE;QAAA,4CACaA,MAAM;UAAA;QAAA;UAA3B,uDAA6B;YAAA,IAAlBE,MAAM;YACbZ,SAAS,CAACM,OAAO,EAAEM,MAAM,CAAC;YAC1BP,UAAU,CAACS,IAAI,CAACF,MAAM,CAAC;UAC3B;QAAC;UAAA;QAAA;UAAA;QAAA;MACL;IACJ,CAAC,EAAE,YAAM;MAAA,4CACgBN,OAAO;QAAA;MAAA;QAA5B,uDAA8B;UAAA,IAAnBM,MAAM;UACbP,UAAU,CAACS,IAAI,CAACF,MAAM,CAAC;QAC3B;MAAC;QAAA;MAAA;QAAA;MAAA;MACDP,UAAU,CAACU,QAAQ,EAAE;IACzB,CAAC,EAAEC,SAAS,EAAE,YAAM;MAChBV,OAAO,GAAG,IAAI;IAClB,CAAC,CAAC,CAAC;EACP,CAAC,CAAC;AACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}